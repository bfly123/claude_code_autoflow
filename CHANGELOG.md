# 更新日志

本项目的所有重要更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [2.0.0] - 2025-10-18
## [3.0.0] - 2025-10-18

### 🚀 革命性简化

**核心改进**: 将 `/expand` 功能整合到 `/run`，实现极简三命令工作流！

### 新增
- 🎉 **/run 智能全能命令**
  - 自动检测任务类型（Simple/Complex/Substep）
  - 遇到 Complex 步骤时自动调用 Codex 展开
  - 展开后立即执行第一个子步骤
  - 无需用户手动判断或切换

- ⚡ **自动展开机制**
  - Complex 步骤首次 `/run` 时触发自动展开
  - Codex 智能拆分为 3-5 个子步骤
  - 用户无感知，完全自动化

### 变更
- 🗑️ **弃用 /expand 命令**
  - 标记为 DEPRECATED
  - 功能已完全整合到 /run
  - 保留文件但添加弃用警告

- 📝 **简化工作流程**
  - v2.0: /plan → 判断 → /run 或 /expand → /run → /clear
  - **v3.0: /plan → /run → /clear** (循环)

### 文档
- 📖 更新 README.md 到 v3.0（极简革命版）
- 📄 更新 PLAN.md 到 v3.0
- 📝 更新 CHANGELOG.md
- 🔖 添加版本对比表

### 向后兼容
- ✅ v2.0 的 todo.md 格式完全兼容
- ✅ /expand 命令保留（标记为弃用）

---


### 新增
- 🎯 **智能复杂度评估系统**
  - 自动识别 Simple (<60k) 和 Complex (≥60k) 步骤
  - `/plan` 命令现在为每个步骤标记复杂度
  - 减少不必要的任务拆分

- ⚡ **自动步骤切换机制**
  - Simple 步骤完成后自动移动到下一步
  - Complex 步骤所有子步骤完成后自动切换
  - 无需手动 `/expand` 切换到下一步

- 🔍 **智能检查功能**
  - `/expand` 命令现在会检查步骤复杂度
  - 对 Simple 步骤提供智能提示
  - `/run` 能自动识别任务类型

### 改进
- 📋 **优化 todo.md 格式**
  - 步骤现在显示 [Simple] 或 [Complex] 标记
  - 当前步骤使用 [▶️] 标记更清晰
  - 改进的进度追踪格式

- 📊 **增强 /progress 命令**
  - 显示步骤复杂度信息
  - 区分 Simple 和 Complex 步骤统计
  - 更详细的进度报告

- 🚀 **简化工作流程**
  - 更少的手动操作
  - 更智能的步骤管理
  - 更流畅的用户体验

### 文档
- 📖 添加详细的 README.md
- 📄 添加 CONTRIBUTING.md 贡献指南
- 🔧 添加 install.sh 安装脚本
- 📝 更新 PLAN.md 到 v2.0

### 技术细节
- `/plan` 命令: 增加复杂度评估逻辑
- `/expand` 命令: 增加智能检查机制
- `/run` 命令: 实现自动步骤切换
- `/progress` 命令: 增加复杂度显示

---

## [1.0.0] - 2025-10-17

### 新增
- 🎉 **初始发布**
- 📋 **核心命令系统**
  - `/plan` - 使用 Codex 创建初始规划
  - `/expand` - 展开步骤为子步骤
  - `/run` - 执行并自动审查
  - `/progress` - 查看进度状态

- 🤖 **双引擎驱动**
  - Codex 负责规划和审查
  - Claude 负责实现和编码

- 📊 **渐进式展开系统**
  - 宏观规划：3-7 个高级步骤
  - 微观执行：3-5 个子步骤
  - 动态管理机制

- 🔋 **Token 优化**
  - 每个子步骤后清理内存
  - todo.md 保持精简
  - 总预算控制在 60%

- ✅ **自动质量保证**
  - 40 分制评分系统
  - 自动 Codex 审查
  - 质量追踪记录

### 文档
- 📖 完整的 PLAN.md 设计文档
- 🔧 命令实现文件
- 📝 用户配置示例

---

## 版本说明

### [2.0.0] vs [1.0.0]

**主要区别**:

1. **复杂度评估** (v2.0 新增)
   - v1.0: 所有步骤统一处理
   - v2.0: 智能区分 Simple/Complex

2. **步骤切换** (v2.0 新增)
   - v1.0: 需要手动 `/expand` 切换
   - v2.0: 自动切换到下一步

3. **工作流程** (v2.0 优化)
   - v1.0: `/plan` → `/expand` → `/run` → `/clear` → `/expand` (循环)
   - v2.0: `/plan` → (智能判断) → `/run`/`/expand` → 自动切换

4. **用户体验** (v2.0 提升)
   - 更少的手动操作
   - 更智能的提示
   - 更流畅的流程

**向后兼容性**:
- ✅ v1.0 的 todo.md 格式仍然支持
- ✅ 所有 v1.0 命令继续工作
- ✅ 现有项目无需迁移

**升级建议**:
- 新项目：直接使用 v2.0
- 现有项目：完成当前任务后升级
- 升级方法：运行 `install.sh` 覆盖命令文件

---

## 路线图

### 计划中的功能

#### v2.1 (计划中)
- [ ] 添加 `/skip` 命令跳过当前步骤
- [ ] 支持步骤依赖检查
- [ ] 改进审查建议的自动应用

#### v2.2 (计划中)
- [ ] 添加 `/rewind` 命令回退到上一步
- [ ] 支持并行子步骤
- [ ] Token 使用统计和分析

#### v3.0 (远期)
- [ ] 可视化进度界面
- [ ] 多项目任务管理
- [ ] 自定义审查标准
- [ ] 团队协作功能

---

## 如何贡献

欢迎提交建议和 Pull Request！请参阅 [CONTRIBUTING.md](CONTRIBUTING.md)。

## 问题反馈

发现问题？请在 [Issues](https://github.com/yourusername/claude-progressive-task-system/issues) 提交。
